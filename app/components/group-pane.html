<dom-module id="group-pane">
	<style>
		:host {
			--group-pane-gutter: 1.4rem;
			--group-pane-regular: 400;
			--group-pane-line-height: 1.6;
			--group-pane-font-size: 13px;
			--group-pane-heading-font-size: 1.5em;
			--group-pane-color-primary: #6390c7;
			--group-pane-color-primary-dark: #4176b6;
			--group-pane-color-ui: #f7f7f9;
			--group-pane-color-text: #fff;
			--group-pane-color-text-dark: #aeaeb2;
			--group-pane-color-bg: #48484c;
			--group-pane-color-bg-transparent: rgba(255, 255, 255, .25);
			--group-pane-heading-height: var(--group-pane-gutter) * 2 + var(--group-pane-heading-font-size) * var(--group-pane-line-height);
			--group-pane-footer-pane-height: var(--group-pane-gutter) * 2 + var(--group-pane-font-size) * var(--group-pane-line-height);
		}

		:host {
			display: block;
		}

		/* Layout */
		.group-pane-header,
		.group-pane-content {
			box-sizing: border-box;
			padding: var(--group-pane-gutter);
		}

		@media (min-width: 50rem) {
			.group-pane-header {
				display: flex;
			}

			.group-pane-header h1 {
				flex-grow: 1;
				align-self: center;
			}

			::content group-pane-menu {
				align-self: center;
				white-space: nowrap;
			}
		}

		@media (min-width: 68rem) and (min-height: 40rem) {
			.group-pane-content {
				height: calc(100vh - (var(--group-pane-heading-height)) - (var(--group-pane-footer-pane-height)));
				overflow: auto;
			}
		}

		/* Header */
		.group-pane-header h1 {
			position: relative;
			margin: 0;
		}

		:host([icon]) .group-pane-header h1 {
			padding-left: 1.25em;
		}

		.group-pane-header h1::before {
			position: absolute;
			left: 0;
			font-family: FontAwesome;
		}

		.group-pane-header ::content menu-item {
			overflow: visible;
		}

		.group-pane-header ::content menu-item a {
			display: inline-block;
		}

		.group-pane-header ::content menu-item[icon] a {
			padding: .3em .5em;
		}

		.group-pane-header ::content menu-item[icon] a::before {
			left: .5em;
		}

		.group-pane-header ::content [active] {
			background-color: var(--group-pane-color-bg-transparent);
		}

		.group-pane-header ::content [active] a {
			font-weight: var(--group-pane-regular);
		}

		/* Group and Menu Blocks */
		::content group-block:not(:last-child),
		::content menu-block:not(:last-child) {
			margin-bottom: var(--group-pane-gutter);
		}

		::content .group-pane-header menu-block {
			margin-bottom: 0;
		}

		/* Menu Pane */
		:host(.menu-pane) {
			color: var(--group-pane-color-text);
			background-color: var(--group-pane-color-bg);
		}

		:host(.menu-pane) .group-pane-header {
			padding-bottom: 0;
		}

		:host(.menu-pane) .group-pane-content {
			padding-top: 0;
		}

		:host(.menu-pane) header h1 {
			padding-bottom: var(--group-pane-gutter);
		}

		:host(.menu-pane) ::content /deep/ a {
			color: var(--group-pane-color-text-dark);
		}

		:host(.menu-pane) ::content /deep/ a:hover,
		:host(.menu-pane) ::content /deep/ a:focus,
		:host(.menu-pane) ::content /deep/ h1,
		:host(.menu-pane) ::content menu-block /deep/ h2,
		:host(.menu-pane) ::content group-block /deep/ h2 {
			color: var(--group-pane-color-text);
		}

		:host(.menu-pane) ::content [type=search] {
			border: 1px solid var(--group-pane-color-text);
			color: var(--group-pane-color-text);
			background-color: var(--group-pane-color-bg);
		}

		:host(.menu-pane) ::content [type=search]:focus {
			outline: 1px solid var(--group-pane-color-text);
		}

		:host(.menu-pane) ::content [type=submit] {
			display: none;
		}

		/* Detail Pane */
		:host(.detail-pane) header {
			color: var(--group-pane-color-text);
			background-color: var(--group-pane-color-primary);
		}

		:host(.detail-pane) header h1,
		:host(.detail-pane) ::content group-pane-menu /deep/ a {
			color: var(--group-pane-color-text);
		}

		:host(.detail-pane) ::content /deep/ a:hover {
			text-decoration: underline;
		}

		:host(.detail-pane) ::content .detail-block,
		:host(.detail-pane) ::content paper-block:not(:last-child) {
			margin-bottom: var(--group-pane-gutter);
		}


		:host(.detail-pane) ::content group-block:not(:last-child),
		:host(.detail-pane) ::content menu-block:not(:last-child) {
			margin-bottom: 0;
		}

		:host(.detail-pane) ::content form-row {
			margin-bottom: var(--group-pane-gutter);
		}

		@media (min-width: 100rem) {
			:host(.detail-pane) .group-pane-content {
				display: flex;
				flex-wrap: wrap;
			}

			:host(.detail-pane) ::content .detail-block {
				flex: 0 1 calc(50% - var(--group-pane-gutter) / 2);
			}

			:host(.detail-pane) ::content .detail-block:nth-child(odd) {
				margin-right: var(--group-pane-gutter);
			}

			:host(.detail-pane) ::content .detail-block:last-child {
				margin-right: 0;
			}
		}

		/* Properties Pane */
		:host(.properties-pane) {
			background-color: var(--group-pane-color-ui);
		}

		:host(.properties-pane) header {
			color: var(--group-pane-color-text);
			background-color: var(--group-pane-color-primary-dark);
		}

		:host(.properties-pane) header h1 {
			color: var(--group-pane-color-text);
		}

		:host(.properties-pane) ::content /deep/ a:hover {
			text-decoration: underline;
		}

		:host(.properties-pane) ::content group-block,
		:host(.properties-pane) ::content menu-block {
			margin-bottom: var(--group-pane-gutter);
			padding-bottom: 1px;
			border-bottom-width: 0;
		}

		@media (min-width: 50rem) and (max-width: 67.999rem) {
			:host(.properties-pane) .group-pane-content {
				display: flex;
				flex-wrap: wrap;
			}

			:host(.properties-pane) ::content .property-block {
				flex: 0 1 calc(50% - var(--group-pane-gutter) / 2);
			}

			:host(.properties-pane) ::content .property-block:nth-child(odd) {
					margin-right: var(--group-pane-gutter);
			}

			:host(.properties-pane) ::content .property-block:last-child {
				margin-right: 0;
			}
		}
	</style>

	<template>
		<section>
			<header class="group-pane-header" style$="{{getBackgroundColor(color)}}">
				<h1 class$="{{getIconClass(icon)}}">{{heading}}</h1>
				<content select="group-pane-menu"></content>
			</header>

			<div class="group-pane-content">
				<content></content>
			</div>
		</section>
	</template>

	<script>
		Polymer({
			is: 'group-pane',
			properties: {
				heading: {
					type: String,
					value: ''
				},
				color: {
					type: String,
					value: ''
				},
				icon: {
					type: String,
					value: ''
				}
			},
			getBackgroundColor: function(color) {
				if (color === '') {
					return '';
				}

				return 'background-color: ' + color;
			},
			getIconClass: function(iconName) {
				if (iconName === '') {
					return '';
				}

				return 'fa-' + iconName;
			}
		});
	</script>
</dom-module>
